extends ../layout

include ../../mixins/forms
include ../../mixins/menus
include ../../mixins/tables

block content
  
  h1= title
  
  mixin helpmenu_back('users')
  
  .form
    form(action='', method='post', class='form-horizontal')
      mixin method(method)
      mixin csrf(token)
      
      - if (method == 'put')
        table.table.table-bordered.table-striped
          mixin thead( [ 'ID' ] )
          tbody
            tr
              td
                mixin disabled('id', 'ID', sess.form.values.id, sess.form.errors.id, '')
      
      table.table.table-bordered.table-striped
        mixin thead( [ 'Login Details' ] )
        tbody
          - if (method == 'put') 
            tr
              td
                mixin checkbox('login_update', 'Update Login', 'true', sess.form.values.login_update, sess.form.errors.login_update, 'Changes to the login details will only take effect if this is selected.')
          tr
            td
              mixin input('text', 'email', 'Email', sess.form.values.email, sess.form.errors.email, '')
          tr
            td
              mixin input('password', 'password', 'Password', '', sess.form.errors.password, '') 
          tr
            td
              mixin input('password', 'password2', 'Password Again', '', sess.form.errors.password2, '') 
      
      table.table.table-bordered.table-striped
        mixin thead( [ 'Contact' ] )
        tbody
          - if (method == 'put') 
            tr
              td
                mixin checkbox('contact_update', 'Update Contact', 'true', sess.form.values.contact_update, sess.form.errors.contact_update, 'Changes to the contact information will only take effect if this is selected.')
          tr
            td
              mixin input('text', 'firstname', 'First Name', sess.form.values.firstname, sess.form.errors.firstname, '')
          tr
            td
              mixin input('text', 'lastname', 'Last Name', sess.form.values.lastname, sess.form.errors.lastname, '')
          tr
            td
              mixin input('text', 'dob', 'Date of Birth', sess.form.values.dob, sess.form.errors.dob, '')
          tr
            td
              mixin input('text', 'phone', 'Phone', sess.form.values.phone, sess.form.errors.phone, '') 
              
      table.table.table-bordered.table-striped
        mixin thead( [ 'Company' ] )
        tbody
          - if (method == 'put') 
            tr
              td
                mixin checkbox('company_update', 'Update Company', 'true', sess.form.values.company_update, sess.form.errors.company_update, 'Changes to the company details will only take effect if this is selected.')
          tr
            td
              mixin input('text', 'company', 'Company Name', sess.form.values.company, sess.form.errors.company, '')
          tr
            td
              mixin input('text', 'website', 'Website', sess.form.values.website, sess.form.errors.website, '')
          - if (method == 'put')
            tr
              td
                mixin disabled('location', 'Location', sess.form.values.location, '', '')
          tr
            td
              mixin input('text', 'address', 'Address', sess.form.values.address, sess.form.errors.address, '')
          tr
            td
              mixin input('text', 'address2', 'Address 2', sess.form.values.address2, sess.form.errors.address2, '')
          tr
            td
              mixin states('state', 'State', sess.form.values.state, sess.form.errors.state, '')
          tr
            td
              mixin input('text', 'city', 'City', sess.form.values.city, sess.form.errors.city, '')
          tr
            td
              mixin input('text', 'zip', 'Zip', sess.form.values.zip, sess.form.errors.zip, '')
              
      table.table.table-bordered.table-striped
        mixin thead( [ 'Payment' ] )
        tbody
          - if (method == 'put') 
            tr
              td
                mixin checkbox('cc_update', 'Update Credit Card', 'true', sess.form.values.cc_update, sess.form.errors.cc_update, 'Changes to the credit card details will only take effect if this is selected.')
          - if (method == 'put')
            tr
              td
                - var s = sess.form.values.cc_type+' ending in '+sess.form.values.cc_last4
                mixin empty('Current Card', s)
          tr
            td
              mixin input('text', 'cc_num', 'Credit Card Number', sess.form.values.cc_num, sess.form.errors.cc_num, '')
          tr
            td
              mixin numbers('cc_mon', 'Exp. Month', sess.form.values.cc_mon, sess.form.errors.cc_mon, '', 1, 12)
          tr
            td
              mixin numbers('cc_year', 'Exp. Year', sess.form.values.cc_year, sess.form.errors.cc_year, '', 2012, 2023)
          tr
            td
              mixin input('text', 'cc_sec', 'Security Code', sess.form.values.cc_sec, sess.form.errors.cc_sec, '')
          tr
            td
              mixin input('text', 'cc_zip', 'Zip Code', sess.form.values.cc_zip, sess.form.errors.cc_zip, '')
              
      table.table.table-bordered.table-striped
        mixin thead( [ 'Terms & agreements' ] )
        tbody
          tr
            td
              mixin checkbox('agree', 'Terms of Service', 'agree', sess.form.values.agree, sess.form.errors.agree, 'agree')
              
      mixin actions(method)
            
